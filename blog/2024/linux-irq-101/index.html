<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Interrupt and Exception 101 | Yihan Yang </title> <meta name="author" content="Yihan Yang"> <meta name="description" content="Guardians of the operating system"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://yihan1998.github.io/blog/2024/linux-irq-101/"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Yihan</span> Yang </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/people/">people </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/">projects</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Interrupt and Exception 101</h1> <p class="post-meta"> March 12, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/linux"> <i class="fa-solid fa-hashtag fa-sm"></i> Linux</a>     ·   <a href="/blog/category/sample-posts"> <i class="fa-solid fa-tag fa-sm"></i> sample-posts</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h1 id="tldr">TL;DR</h1> <p>Interrupt and exception are critical mechanisms for the correct execution of operating systems. Interrupt handles events from external hardware and exception deals with events generated from the processor itself.</p> <table> <thead> <tr> <th style="text-align: center">Interrupt</th> <th style="text-align: center">Exception</th> </tr> </thead> <tbody> <tr> <td style="text-align: center">Triggered by external hardware events</td> <td style="text-align: center">Triggered by the local processor</td> </tr> <tr> <td style="text-align: center">Asynchronous handling for external requests (e.g., keyboard input)</td> <td style="text-align: center">Synchronous handling for internal requests (e.g., memory overflow)</td> </tr> <tr> <td style="text-align: center">Could happen almost anytime anywhere during execution</td> <td style="text-align: center">Happen more deterministically</td> </tr> </tbody> </table> <h1 id="what-are-interrupt-and-exception-and-why-do-we-need-them">What are interrupt and exception and why do we need them?</h1> <p>Interrupt and exception are mechanisms to handle unusual events that happened in the current workflow. Technically speaking, any event that triggers a divergence in execution and incurs a mode switch could be considered as an interrupt or an exception. More specifically, system calls could be counted as one type of exception. But for the sake of simplicity, we will elaborate how system calls work in a separate chapter.</p> <p>The reason for having interrupt is that some events need to be processed in a timely manner. These events include but not limited to incoming of network packets, keyboard input, and inter-process interrupt.</p> <p>The reason for having exception is that errors happen constantly during runtime.</p> <h1 id="how-do-interrupt-and-exception-work">How do interrupt and exception work?</h1> <p>Interrupt and exception are often introduced together. Despite that they share a lot in common, we have to clarify the difference between them in the very beginning. I am going to use The Bear — highly recommended, though my anxiety level rockets to the sky every single time I watch it — as an example to elaborate the similarity and difference between these too concepts.</p> <h2 id="an-example-of-interrupt">An example of interrupt</h2> <p>Imagine you are Carmy. The beef is sitting nicely in the pot on the stove and you are preparing for the lunch time. Suddenly some random stupid thing happens out of blue, for example, the water pipe just simply decides to burst. What can you do about it? You are a well trained chef, not a plumber. So you phone up someone who can fix the pipe, and then return to the beef as soon as possible because it is being left unattended. Finally the guy comes and fixes the pipe just before the restaurant opens. Phew! That was close!</p> <h2 id="an-example-of-exception">An example of exception</h2> <p>You are still Carmy in this case. The beef is getting ready and the smell is so good right now. Time to prepare the assembling of the sandwiches — but wait! Someone screwed up the number of buns and now you are several dozens short of them. What choice do you have? You have to try your best to make as many buns as possible before the customers flood in. Luckily you are able to bake enough of them just half an hour prior the opening of the restaurant and now it’s time to assemble some delicious sandwiches for all those hungry mouths. Another day another dollar right?</p> <h2 id="similarities-and-differences">Similarities and differences</h2> <p>Like the beginning of the above two examples, the start of interrupt and exception are the same: someone is running some logic flow before something unexpected happens. The similarities between these two concepts are as follows:</p> <ul> <li> <p>Divergence from the current execution flow: Both temporarily leave the current execution flow of instructions and jump to a predefined entry point in the Kernel to handle a specific event.</p> </li> <li> <p>Incurring context switch (and probably mode switch as well): Both require the processor to save the current context (i.e., the register contents) into memory and restore it after the handler routine finishes.</p> </li> </ul> <p>Yet these two mechanisms exist for very different scenarios. Here I list some of the key differences between them:</p> <ul> <li> <p><strong>External vs. internal triggering</strong>: Interrupt is triggered by I/O devices like keyboard, mouse, and network interface card. Exception is triggered by the processer itself, like dividing by zero, accessing an invalid memory, or stack overflow.</p> </li> <li> <p><strong>Async vs. sync handling</strong>: Interrupt is handled in a timely and typically asynchronized manner, whilst exception is handled in a synchronized way. In other words, interrupt is acknowledged by the interrupt handler, but doesn’t have to be fully processed before returning back to the userspace. Exception, on the other hand, has to be fully resolved so that the original execution flow can resume normally.</p> </li> <li> <p><strong>Random vs. predictable</strong>: Interrupt may happen almost anytime anywhere when the system is running. Exception is more deterministic since the happen due to specific instructions or explicit events.</p> </li> </ul> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/linux-syscall-301/">Syscall 301: A Deep Dive into the System Calls in Linux Kernel</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/linux-syscall-101/">Syscall 101: Introduction to System Calls</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/linux-syscall-201/">Syscall 201: The Lifecycle of System Calls in Operaing System</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/distill/">a distill-style blog post</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/linux-io-multiplex/">I/O Multiplexing 101</a> </li> </div> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Yihan Yang. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?da39b660470d1ba6e6b8bf5f37070b6e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>